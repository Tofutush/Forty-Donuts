<!DOCTYPE html>
<html>
<head>
	<title>Story Map</title>
	<link rel="stylesheet" href="../style.css"/>
	<style>
		#content {
			margin: auto;
			width: 75%;
		}
		.section {
			border-left: 12px solid var(--bd);
			padding: 0 24px 0 36px;
			position: relative;
			user-select: none;
		}
		.section::before {
			background-color: var(--bd);
			content: '';
			height: 12px;
			left: 0;
			position: absolute;
			top: 0;
			width: 12px;
		}
		.section::after {
			content: '';
			background-color: var(--bd);
			height: 12px;
			width: 12px;
			position: absolute;
			bottom: 0;
			left: 0;
		}
		.section div:first-child {
			background-color: var(--bd);
			color: #fff;
			font-size: 24px;
			left: -34px;
			line-height: 21px;
			padding: 5px 3px;
			position: absolute;
			top: 40px;
			width: 28px;
			word-wrap: break-word;
		}
		.section div:first-child p {
			font-size: 40px;
			margin: 10px 0;
		}
		.act {
			display: flex;
			align-items: center;
			justify-content: space-between;
			border: 8px solid var(--bd);
			background-color: var(--bg);
			color: var(--c);
			padding: 3px;
			margin: 12px 0;
		}
		.act a {
			height: 150px;
			width: 150px;
		}
		.act div {
			margin: 24px;
			text-align: right;
		}
		.act div span:first-child {
			font-size: 36px;
		}
		.act div span:last-child {
			font-size: 24px;
		}
		.mls {
			display: grid;
			grid-template-columns: 110px 110px 110px 110px 110px;
			margin: auto;
			width: 550px;
		}
	</style>
</head>
<body>
	<nav id="navbar">
		<a href="../info">Story Info</a>
		|
		<a href="../log">Story Log</a>
		|
		<a id="back">Back to the Story</a>
		|
		<a href="https://mspfa.com/?s=48313&p=1">Forty Donuts on MSPFA</a>
		|
		<a href="https://mspfa.com">MSPFA Site</a>
		|
		<a href="https://homestuck.com">Homestuck Site</a>
	</nav>
	<div id="wrapper">
		<div id="frame">
			<div id="switch-lang"><a href="../zh/map">简体中文</a></div>
			<div id="command">Story Map</div>
			<div id="content">PAGE STILL UNDER CONSTRUCTION. CONTENT IS TEMPORARY.</div>
		</div>
	</div>
	<script src="../functions.js"></script>
	<script>
		const qq = [
			{ // side 1
				c: '#b7b7b7',
				q: [
					{ // part 1
						c: '#00f',
						q: [
							{ // act 1
								bd: '#123456',
								bg: '#654321',
								c: '#111111',
								type: 1, // 1 means act
								num: 1,
								name: 'FLARPventure',
								ml: 2,
								mls: [2, 2, 2, 2, 2, 2, 2, 2]
							},
							{ // intermission 1
								bd: 'green',
								bg: 'lightgreen',
								c: '#fff',
								type: 0, // 0 means intermission
								num: 1,
								name: 'The Flashback',
								ml: 2,
								mls: [2, 3, 2, 3, 2]
							},
							{ // act 1
								bd: '#abcdef',
								bg: '#fedcba',
								c: '#111111',
								type: 1,
								num: 1,
								name: 'Continued',
								ml: 2,
								mls: [2]
							},
							{ // act 2
								bd: '#111111',
								bg: '#111111',
								c: '#111111',
								type: 1,
								num: 2,
								name: 'Crashed Party', // make her pay
								ml: 2,
								mls: [2]
							},
							{ // act 3
								bd: '#111111',
								bg: '#111111',
								c: '#111111',
								type: 1,
								num: 3,
								name: 'Milk, Tea, and Donuts',
								ml: 2,
								mls: [2]
							}
						]
					}
				]
			},
			{ // side 2
				c: '#b7b7b7',
				q: []
			}
		];
		// code relies heavily on structure of qq object
		for(let z = 0; z < qq.length; z++) {
			let side = elt('div', {className: 'section'}, elt('div', {}, 'Side', elt('p', {}, String(z + 1))));
			side.style.setProperty('--bd', qq[z].c);
			for(let x = 0; x < qq[z].q.length; x++) {
				let part = elt('div', {className: 'section'}, elt('div', {}, 'Part', elt('p', {}, String(x + 1))));
				part.style.setProperty('--bd', qq[z].q[x].c);
				for(let c = 0; c < qq[z].q[x].q.length; c++) {
					let act = elt('div', {className: 'act'},
						elt('a', {href: `../?page=${qq[z].q[x].q[c].ml}`},
							elt('img', {src: `img/a${qq[z].q[x].q[c].num}.png`})),
						elt('div', {},
							elt('span', {}, `${qq[z].q[x].q[c].type ? 'Act' : 'Intermission'} ${qq[z].q[x].q[c].num}`),
							elt('br'),
							elt('span', {}, qq[z].q[x].q[c].name)));
					act.style.setProperty('--bg', qq[z].q[x].q[c].bg);
					act.style.setProperty('--bd', qq[z].q[x].q[c].bd);
					act.style.setProperty('--c', qq[z].q[x].q[c].c);
					let mls = elt('div', {className: 'mls'});
					for(let v = 0; v < qq[z].q[x].q[c].mls.length; v++) {
						mls.appendChild(elt('a', {href: `../?page=${qq[z].q[x].q[c].mls[v]}`}, elt('img', {src: `img/${qq[z].q[x].q[c].mls[v]}.png`})));
					}
					part.appendChild(act);
					part.appendChild(mls);
				}
				side.appendChild(part);
			}
			document.getElementById('content').appendChild(side);
		}
		// when going back, go to last visited page
		document.getElementById('back').href = `../?page=${window.localStorage.getItem('switchpagenum') || 1}`;
	</script>
</body>
